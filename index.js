"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_createClass=function(){function t(t,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(s,e,i){return e&&t(s.prototype,e),i&&t(s,i),s}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var s=0,e=Array(t.length);s<t.length;s++)e[s]=t[s];return e}return Array.from(t)}function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var Clock=function(){function t(s){var e=this;_classCallCheck(this,t),this.start=function(){var t=new Date,s=e.addZero(t.getHours()),i=e.addZero(t.getMinutes()),n=e.addZero(t.getSeconds());e.state={hours:s,minutes:i,seconds:n},e.update(),setTimeout(function(){e.start()},1e3)},this.update=function(){for(var t in e.nodes)e.nodes[t].amount!==e.state[t]&&function(){var s=e.nodes[t].counter;e.nodes[t].sides[s].innerHTML='<div class="text">'+e.state[t]+"</div>",e.nodes[t].sides.forEach(function(t,e){var i=t.querySelector(".text");i&&e===s?(i.style.transition="opacity 0.1s linear",i.style.opacity=1):i&&e!==s&&(i.style.transition="opacity 0.3s linear",i.style.opacity=0)}),"up"===e.options.direction?e.nodes[t].deg+=90:e.nodes[t].deg-=90,e.nodes[t].style.transform="rotate3d(1,0,0,"+e.nodes[t].deg+"deg)",e.nodes[t].counter=e.nodes[t].counter===e.nodes[t].maxCounter?0:e.nodes[t].counter+1}(),e.nodes[t].amount=e.state[t]};this.root=s.root,this.options=_extends({},{perspective:!1,direction:"up",sidesOrder:{up:{front:4,bottom:1,back:2,top:3},down:{front:4,bottom:3,back:2,top:1}}},s),this.state={hours:"00",minutes:"00",seconds:"00"},this.init(),this.start()}return _createClass(t,[{key:"cacheNodes",value:function(){var t=this.options.sidesOrder[this.options.direction];this.nodes={hours:this.root.querySelector(".js-hours"),minutes:this.root.querySelector(".js-minutes"),seconds:this.root.querySelector(".js-seconds")};for(var s in this.nodes){var e=[].concat(_toConsumableArray(this.nodes[s].querySelectorAll(".side"))).filter(function(t){return!(t.classList.contains("left")||t.classList.contains("right"))}).sort(function(s,e){var i=s.classList.value.replace(/ side/,""),n=e.classList.value.replace(/ side/,"");return t[i]>t[n]?1:-1});this.nodes[s].sides=e,this.nodes[s].amount=-1,this.nodes[s].deg=0,this.nodes[s].counter=0,this.nodes[s].maxCounter=e.length-1}}},{key:"init",value:function(){this.root.classList.toggle("perspective",this.options.perspective),this.root.innerHTML='\n\t\t<div class="container js-hours">\n    \t<div class="back side"></div>\n    \t<div class="left side"></div>\n    \t<div class="right side"></div>\n    \t<div class="top side"></div>\n    \t<div class="bottom side"></div>\n    \t<div class="front side"></div>\n\t\t</div>\n\t\t<div class="dots">\n\t\t\t<div class="dot"></div>\n\t\t\t<div class="dot"></div>\n\t\t</div>\n\t\t<div class="container js-minutes">\n    \t<div class="back side"></div>\n    \t<div class="left side"></div>\n    \t<div class="right side"></div>\n    \t<div class="top side"></div>\n    \t<div class="bottom side"></div>\n    \t<div class="front side"></div>\n\t\t</div>\n\t\t<div class="dots">\n\t\t\t<div class="dot"></div>\n\t\t\t<div class="dot"></div>\n\t\t</div>\n\t\t<div class="container js-seconds">\n    \t<div class="back side"></div>\n    \t<div class="left side"></div>\n    \t<div class="right side"></div>\n    \t<div class="top side"></div>\n    \t<div class="bottom side"></div>\n    \t<div class="front side"></div>\n\t\t</div>\n\t\t',this.cacheNodes()}},{key:"addZero",value:function(t){return t>=10?""+t:"0"+t}}]),t}();exports.default=Clock;